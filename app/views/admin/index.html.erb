<h1>Admin Dashboard</h1>
<%# <p>Find me in app/views/admin/index.html.erb</p> %>

<%# <% @users.each do |user| %>
    <%= form_with(model: user, url: admin_path(user), method: :patch, local: true) do |f| %>
        <p>
        <%= user.email %> | <%= user.role %>
        <%= f.label :role %>
        <%= f.select :role, User.roles.keys.map { |role| [role.humanize, role] }, {}, {class: "select-role"} %>
        <%= f.submit "Update Role" %>
        </p>
    <% end %>
    <%= link_to 'Remove User', admin_path(user), method: :delete, data: { confirm: 'Are you sure?' } %>
  <% end %> %>

  

<h1>Admin Dashboard</h1>

<%= form_with url: admin_index_path, method: :get, local: true do |form| %>
  <%= form.label :search, "Search Users" %>
  <%= form.text_field :search %>
  <%= form.submit "Search" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Email</th>
      <th>Role</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= user.role %></td>
        <td>
          <%= link_to 'Promote to Admin', promote_to_admin_admin_path(user), method: :patch, data: { confirm: 'Are you sure?' } unless user.admin? %>
          <%= link_to 'Remove', remove_user_admin_path(user), method: :delete, data: { confirm: 'Are you sure?' } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
